<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="https://unpkg.com/spectre.css/dist/spectre.min.css">
    <link rel="stylesheet" href="https://unpkg.com/spectre.css/dist/spectre-exp.min.css">
    <link rel="stylesheet" href="https://unpkg.com/spectre.css/dist/spectre-icons.min.css">
    <link rel="stylesheet" th:href="@{/css/styles.css}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Ethiopic&display=swap" rel="stylesheet">
    <title>Customers</title>
</head>

<body>
    <header class="navbar">
        <section class="navbar-section">
            <a href="#" class="navbar-brand mr-2">Aguafina</a>
        </section>
        <section class="navbar-section" sec:authorize="hasAnyAuthority('ADMIN', 'USER')">
            <a class="btn btn-link" th:href="@{/orders}">Orders</a>
        </section>
        <section class="navbar-section" sec:authorize="hasAnyAuthority('ADMIN', 'USER')">
            <a class="btn btn-link active" th:href="@{/customers}">Customers</a>
        </section>
        <section class="navbar-section" sec:authorize="hasAnyAuthority('ADMIN')">
            <a class="btn btn-link" th:href="@{/employees}">Employees</a>
        </section>
        <section class="navbar-section">
            <a class="btn btn-link" th:href="@{/logout}">Log Out</a>
        </section>
    </header>
    <div class="container pt-2 pb-2">
        <div class="columns">
            <div class="column col-4">
                <a th:href="@{/customers/new}" class="btn btn-lg" id="create-button">Create New Customer</a>
            </div>
            <div class="column col-4">
                <h2 class="text-center">Customers</h2>
            </div>
            <div class="column col-4">
                <form method="get" th:object="${customer}" th:action="@{/customers/search}">
                    <div class="input-group input-inline">
                        <input class="form-input" type="text" placeholder="search" th:value="${lastName}">
                        <button type="submit" class="btn btn-primary input-group-btn"
                            title="Search By Last Name">Search</button>
                    </div>
                </form>
            </div>
        </div>
        <div class="container">
            <div class="columns">
                <div class="tile column col-6" th:each="customer : ${customers}" id="customer-tile">
                    <div class="tile-content">
                        <div class="tile-title h4" th:text="${customer.firstName} + ' ' + ${customer.lastName}"></div>
                        <div class="tile-subtitle" th:text="${customer.id}"></div>
                        <div class="divider"></div>
                        <div class="columns">
                            <div class="column col-4">Email:</div>
                            <div class="column col-8" th:text="${customer.email}"></div>
                            <div class="column col-4">Phone:</div>
                            <div class="column col-8" th:text="${customer.phone}"></div>
                            <div class="column col-4">Address:</div>
                            <div class="column col-8" th:text="${customer.address}">
                            </div>
                            <div class="column col-4 d-invisible">Placeholder</div>
                            <div class="column col-8"
                                th:text="${customer.city} + ', ' + ${customer.state} + ' ' + ${customer.zipCode}">
                            </div>
                        </div>
                    </div>
                    <div class="tile-action">
                        <a class="btn btn-link" id="update-button"
                            th:href="@{/customers/edit/{id}(id=${customer.id})}">Update <span
                                class="icon icon-edit"></span></a>
                    </div>
                </div>
            </div>
        </div>
</body>

</html>